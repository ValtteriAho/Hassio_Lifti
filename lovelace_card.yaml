# Lovelace Dashboard Kortti - Bussiaikataulut
# Lis√§√§ t√§m√§ Lovelace dashboardiin (k√§ytt√∂liittym√§)
# Voit muokata ulkoasua (type, card-mod jne.)

# KOMPAKTI VERSIO - Molemmat pys√§kit yhdess√§ kortissa
type: vertical-stack
title: üöå Bussiaikataulut
cards:
  - type: markdown
    content: |
      **{{ state_attr('sensor.bussiaikataulu_pysakki_1', 'pysakki_nimi') }}**
      Seuraava: **{{ states('sensor.bussiaikataulu_pysakki_1') }}**
      {% for i in range(1, 4) %}
      {% set lahto = state_attr('sensor.bussiaikataulu_pysakki_1', 'lahto_' ~ i) %}
      {% if lahto %}{{ lahto }}
      {% endif %}{% endfor %}
      
      ---
      
      **{{ state_attr('sensor.bussiaikataulu_pysakki_2', 'pysakki_nimi') }}**
      Seuraava: **{{ states('sensor.bussiaikataulu_pysakki_2') }}**
      {% for i in range(1, 4) %}
      {% set lahto = state_attr('sensor.bussiaikataulu_pysakki_2', 'lahto_' ~ i) %}
      {% if lahto %}{{ lahto }}
      {% endif %}{% endfor %}

---

# VAIHTOEHTO 2: Kompakti yhdistetty n√§kym√§
type: markdown
title: üöå Bussiaikataulut
content: |
  {{ state_attr('sensor.bussiaikataulu_yhdistetty', 'kaikki_lahdot') }}

---

# VAIHTOEHTO 3: Entities-kortti (yksinkertaisempi)
type: entities
title: üöå Bussiaikataulut
show_header_toggle: false
entities:
  - entity: sensor.bussiaikataulu_pysakki_1
    name: Pys√§kki 1 - Seuraava
    icon: mdi:bus-clock
  - type: attribute
    entity: sensor.bussiaikataulu_pysakki_1
    attribute: lahto_1
    name: "  1."
  - type: attribute
    entity: sensor.bussiaikataulu_pysakki_1
    attribute: lahto_2
    name: "  2."
  - type: attribute
    entity: sensor.bussiaikataulu_pysakki_1
    attribute: lahto_3
    name: "  3."
  - type: divider
  - entity: sensor.bussiaikataulu_pysakki_2
    name: Pys√§kki 2 - Seuraava
    icon: mdi:bus-clock
  - type: attribute
    entity: sensor.bussiaikataulu_pysakki_2
    attribute: lahto_1
    name: "  1."
  - type: attribute
    entity: sensor.bussiaikataulu_pysakki_2
    attribute: lahto_2
    name: "  2."
  - type: attribute
    entity: sensor.bussiaikataulu_pysakki_2
    attribute: lahto_3
    name: "  3."

---

# VAIHTOEHTO 4: Conditional card - N√§yt√§ vain arkiaamuisin
type: conditional
conditions:
  - condition: state
    entity: binary_sensor.workday_sensor  # Vaatii workday integraation
    state: "on"
  - condition: time
    after: "06:00:00"
    before: "10:00:00"
card:
  type: markdown
  title: üöå Koulubussit t√§n√§√§n
  content: |
    **{{ state_attr('sensor.bussiaikataulu_pysakki_1', 'pysakki_nimi') }}**
    
    {% for i in range(1, 4) %}
    {% set attr_name = 'lahto_' ~ i %}
    {% set lahto = state_attr('sensor.bussiaikataulu_pysakki_1', attr_name) %}
    {% if lahto %}
    {{ i }}. {{ lahto }}
    {% endif %}
    {% endfor %}
